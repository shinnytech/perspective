var M=(r=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(r,{get:(t,o)=>(typeof require!="undefined"?require:t)[o]}):r)(function(r){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+r+'" is not supported')});var Zn=(r=>typeof M!="undefined"?M:typeof Proxy!="undefined"?new Proxy(r,{get:(t,o)=>(typeof M!="undefined"?M:t)[o]}):r)(function(r){if(typeof M!="undefined")return M.apply(this,arguments);throw new Error('Dynamic require of "'+r+'" is not supported')});var Be=class extends HTMLElement{constructor(){super()}get name(){return"Debug"}get select_mode(){return"select"}get min_config_columns(){}get config_column_names(){}async update(r){return this.draw(r)}async draw(r){this.style.backgroundColor="#fff";let t=await r.to_csv(),o="margin:0;overflow:scroll;position:absolute;width:100%;height:100%";this.innerHTML=`<pre style='${o}'>${t}</pre>`}async clear(){this.innerHTML=""}async resize(){}async restyle(){}async save(){}async restore(){}async delete(){}};document.createElement("perspective-viewer-plugin").constructor===HTMLElement&&window.customElements.define("perspective-viewer-plugin",Be);var vt=window.ClipboardItem,yt="./editor.worker.js";async function xt(){let r=new URL(yt,import.meta.url);return await(await fetch(r)).text()}function We(r,t){function o(e,n){r.push(n)}function _(e){if(Object.keys(e).length>0)for(let n of t)n({data:e})}return{addEventListener:o,postMessage:_,location:{href:""}}}function Xe(r){let t=Function("const self = arguments[0];"+r),o=[],_=[];return t(We(o,_)),We(_,o)}var Tt=xt(),Dt=async function(){let r=await Tt;if(window.location.protocol.startsWith("file")&&!window.isElectron)return console.warn("file:// protocol does not support Web Workers"),Xe(r);try{let t=new Blob([r],{type:"application/javascript"}),o=URL.createObjectURL(t);return new Worker(o,{type:"module"})}catch(t){return console.warn("Failed to instantiate worker, falling back to single-threaded runtime",t),Xe(r)}};async function Et(){return await Dt()}async function Ot(){return await import("./edcore.main.js")}var St=window.ResizeObserver,d,Ve=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});Ve.decode();var K=null;function Z(){return(K===null||K.buffer!==d.memory.buffer)&&(K=new Uint8Array(d.memory.buffer)),K}function b(r,t){return Ve.decode(Z().subarray(r,r+t))}var S=new Array(32).fill(void 0);S.push(void 0,null,!0,!1);var W=S.length;function c(r){W===S.length&&S.push(S.length+1);let t=W;return W=S[t],S[t]=r,t}function i(r){return S[r]}var y=0,Q=new TextEncoder("utf-8"),kt=typeof Q.encodeInto=="function"?function(r,t){return Q.encodeInto(r,t)}:function(r,t){let o=Q.encode(r);return t.set(o),{read:r.length,written:o.length}};function x(r,t,o){if(o===void 0){let s=Q.encode(r),u=t(s.length);return Z().subarray(u,u+s.length).set(s),y=s.length,u}let _=r.length,e=t(_),n=Z(),a=0;for(;a<_;a++){let s=r.charCodeAt(a);if(s>127)break;n[e+a]=s}if(a!==_){a!==0&&(r=r.slice(a)),e=o(e,_,_=a+r.length*3);let s=Z().subarray(e+a,e+_);a+=kt(r,s).written}return y=a,e}var ee=null;function f(){return(ee===null||ee.buffer!==d.memory.buffer)&&(ee=new Int32Array(d.memory.buffer)),ee}function jt(r){r<36||(S[r]=W,W=r)}function p(r){let t=i(r);return jt(r),t}function w(r){return r==null}var te=null;function It(){return(te===null||te.buffer!==d.memory.buffer)&&(te=new Float64Array(d.memory.buffer)),te}function R(r,t,o,_){let e={a:r,b:t,cnt:1,dtor:o},n=(...a)=>{e.cnt++;let s=e.a;e.a=0;try{return _(s,e.b,...a)}finally{--e.cnt==0?d.__wbindgen_export_2.get(e.dtor)(s,e.b):e.a=s}};return n.original=e,n}function Ct(r,t,o){d.__wbindgen_export_3(r,t,c(o))}function Lt(r,t,o){var _=d.__wbindgen_export_4(r,t,c(o));return p(_)}function At(r,t,o){d.__wbindgen_export_5(r,t,c(o))}function Pt(r,t){d.__wbindgen_export_6(r,t)}function ne(r,t,o,_){let e={a:r,b:t,cnt:1,dtor:o},n=(...a)=>{e.cnt++;try{return _(e.a,e.b,...a)}finally{--e.cnt==0&&(d.__wbindgen_export_2.get(e.dtor)(e.a,e.b),e.a=0)}};return n.original=e,n}function Ht(r,t,o){d.__wbindgen_export_7(r,t,c(o))}function Nt(r,t,o){d.__wbindgen_export_8(r,t,c(o))}function Mt(r,t,o,_,e){var n=d.__wbindgen_export_9(r,t,c(o),c(_),c(e));return p(n)}function Rt(r,t,o){var _=d.__wbindgen_export_10(r,t,c(o));return p(_)}function Ut(r,t){d.__wbindgen_export_11(r,t)}function Yt(r,t,o){d.__wbindgen_export_12(r,t,c(o))}var re=32;function $t(r){if(re==1)throw new Error("out of js stack");return S[--re]=r,re}function Ft(r,t,o){try{d.__wbindgen_export_13(r,t,$t(o))}finally{S[re++]=void 0}}var ae=null;function qe(){return(ae===null||ae.buffer!==d.memory.buffer)&&(ae=new Uint32Array(d.memory.buffer)),ae}function zt(r,t){let o=t(r.length*4),_=qe();for(let e=0;e<r.length;e++)_[o/4+e]=c(r[e]);return y=r.length,o}function g(r,t){try{return r.apply(this,t)}catch(o){d.__wbindgen_export_14(c(o))}}function Bt(r){var t=x(r,d.__wbindgen_export_0,d.__wbindgen_export_1),o=y;d.register_plugin(t,o)}function Je(r,t){let o=qe().subarray(r/4,r/4+t),_=[];for(let e=0;e<o.length;e++)_.push(p(o[e]));return _}function Wt(){try{let _=d.__wbindgen_add_to_stack_pointer(-16);d.get_exprtk_commands(_);var r=f()[_/4+0],t=f()[_/4+1],o=Je(r,t).slice();return d.__wbindgen_export_15(r,t*4),o}finally{d.__wbindgen_add_to_stack_pointer(16)}}function Xt(r,t,o,_){d.__wbindgen_export_16(r,t,c(o),c(_))}var he=class{static __wrap(r){let t=Object.create(he.prototype);return t.ptr=r,t}__destroy_into_raw(){let r=this.ptr;return this.ptr=0,r}free(){let r=this.__destroy_into_raw();d.__wbg_copydropdownmenuelement_free(r)}constructor(r){var t=d.copydropdownmenuelement_new(c(r));return he.__wrap(t)}open(r){d.copydropdownmenuelement_open(this.ptr,c(r))}hide(){d.copydropdownmenuelement_hide(this.ptr)}unsafe_set_model(r){d.copydropdownmenuelement_unsafe_set_model(this.ptr,r)}connected_callback(){d.copydropdownmenuelement_connected_callback(this.ptr)}},me=class{static __wrap(r){let t=Object.create(me.prototype);return t.ptr=r,t}__destroy_into_raw(){let r=this.ptr;return this.ptr=0,r}free(){let r=this.__destroy_into_raw();d.__wbg_exportdropdownmenuelement_free(r)}constructor(r){var t=d.exportdropdownmenuelement_new(c(r));return me.__wrap(t)}open(r){d.exportdropdownmenuelement_open(this.ptr,c(r))}hide(){d.exportdropdownmenuelement_hide(this.ptr)}unsafe_set_model(r){d.exportdropdownmenuelement_unsafe_set_model(this.ptr,r)}connected_callback(){d.exportdropdownmenuelement_connected_callback(this.ptr)}},ve=class{static __wrap(r){let t=Object.create(ve.prototype);return t.ptr=r,t}__destroy_into_raw(){let r=this.ptr;return this.ptr=0,r}free(){let r=this.__destroy_into_raw();d.__wbg_perspectivenumbercolumnstyleelement_free(r)}constructor(r,t,o){var _=d.perspectivenumbercolumnstyleelement_new(c(r),c(t),c(o));return ve.__wrap(_)}reset(r,t){d.perspectivenumbercolumnstyleelement_reset(this.ptr,c(r),c(t))}open(r){d.perspectivenumbercolumnstyleelement_open(this.ptr,c(r))}close(){d.perspectivenumbercolumnstyleelement_close(this.ptr)}destroy(){let r=this.__destroy_into_raw();d.perspectivenumbercolumnstyleelement_destroy(r)}connected_callback(){d.perspectivenumbercolumnstyleelement_connected_callback(this.ptr)}},ye=class{static __wrap(r){let t=Object.create(ye.prototype);return t.ptr=r,t}__destroy_into_raw(){let r=this.ptr;return this.ptr=0,r}free(){let r=this.__destroy_into_raw();d.__wbg_perspectivestringcolumnstyleelement_free(r)}constructor(r,t,o){var _=d.perspectivestringcolumnstyleelement_new(c(r),c(t),c(o));return ye.__wrap(_)}reset(r){d.perspectivestringcolumnstyleelement_reset(this.ptr,c(r))}open(r){d.perspectivestringcolumnstyleelement_open(this.ptr,c(r))}close(){d.perspectivestringcolumnstyleelement_close(this.ptr)}destroy(){let r=this.__destroy_into_raw();d.perspectivestringcolumnstyleelement_destroy(r)}connected_callback(){d.perspectivestringcolumnstyleelement_connected_callback(this.ptr)}},xe=class{static __wrap(r){let t=Object.create(xe.prototype);return t.ptr=r,t}__destroy_into_raw(){let r=this.ptr;return this.ptr=0,r}free(){let r=this.__destroy_into_raw();d.__wbg_perspectiveviewerelement_free(r)}constructor(r){var t=d.perspectiveviewerelement_new(c(r));return xe.__wrap(t)}connected_callback(){d.perspectiveviewerelement_connected_callback(this.ptr)}js_load(r){var t=d.perspectiveviewerelement_js_load(this.ptr,c(r));return p(t)}js_delete(){var r=d.perspectiveviewerelement_js_delete(this.ptr);return p(r)}js_get_view(){var r=d.perspectiveviewerelement_js_get_view(this.ptr);return p(r)}js_get_table(r){var t=d.perspectiveviewerelement_js_get_table(this.ptr,r);return p(t)}js_flush(){var r=d.perspectiveviewerelement_js_flush(this.ptr);return p(r)}js_restore(r){var t=d.perspectiveviewerelement_js_restore(this.ptr,c(r));return p(t)}js_save(r){var t=w(r)?0:x(r,d.__wbindgen_export_0,d.__wbindgen_export_1),o=y,_=d.perspectiveviewerelement_js_save(this.ptr,t,o);return p(_)}js_download(r){var t=d.perspectiveviewerelement_js_download(this.ptr,r);return p(t)}js_copy(r){var t=d.perspectiveviewerelement_js_copy(this.ptr,r);return p(t)}js_reset(r){var t=d.perspectiveviewerelement_js_reset(this.ptr,c(r));return p(t)}js_resize(r){var t=d.perspectiveviewerelement_js_resize(this.ptr,r);return p(t)}js_set_auto_size(r){d.perspectiveviewerelement_js_set_auto_size(this.ptr,r)}js_get_edit_port(){var r=d.perspectiveviewerelement_js_get_edit_port(this.ptr);return r}js_restyle_element(){var r=d.perspectiveviewerelement_js_restyle_element(this.ptr);return p(r)}js_reset_themes(r){var t=w(r)?0:zt(r,d.__wbindgen_export_0),o=y,_=d.perspectiveviewerelement_js_reset_themes(this.ptr,t,o);return p(_)}js_set_throttle(r){d.perspectiveviewerelement_js_set_throttle(this.ptr,!w(r),w(r)?0:r)}js_toggle_config(r){var t=d.perspectiveviewerelement_js_toggle_config(this.ptr,w(r)?16777215:r?1:0);return p(t)}js_get_all_plugins(){var r=d.perspectiveviewerelement_js_get_all_plugins(this.ptr);return p(r)}js_get_plugin(r){var t=w(r)?0:x(r,d.__wbindgen_export_0,d.__wbindgen_export_1),o=y,_=d.perspectiveviewerelement_js_get_plugin(this.ptr,t,o);return p(_)}js_unsafe_get_model(){var r=d.perspectiveviewerelement_js_unsafe_get_model(this.ptr);return r}};async function Vt(r,t){if(typeof Response=="function"&&r instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(r,t)}catch(_){if(r.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",_);else throw _}let o=await r.arrayBuffer();return await WebAssembly.instantiate(o,t)}else{let o=await WebAssembly.instantiate(r,t);return o instanceof WebAssembly.Instance?{instance:o,module:r}:o}}async function Ge(r){typeof r=="undefined"&&(r=new URL("perspective_viewer_bg.wasm",import.meta.url));let t={};t.wbg={},t.wbg.__wbindgen_json_parse=function(e,n){var a=JSON.parse(b(e,n));return c(a)},t.wbg.__wbindgen_json_serialize=function(e,n){let a=i(n);var s=JSON.stringify(a===void 0?null:a),u=x(s,d.__wbindgen_export_0,d.__wbindgen_export_1),l=y;f()[e/4+1]=l,f()[e/4+0]=u},t.wbg.__wbindgen_object_drop_ref=function(e){p(e)},t.wbg.__wbindgen_object_clone_ref=function(e){var n=i(e);return c(n)},t.wbg.__wbindgen_jsval_eq=function(e,n){var a=i(e)===i(n);return a},t.wbg.__wbindgen_cb_drop=function(e){let n=p(e).original;if(n.cnt--==1)return n.a=0,!0;var a=!1;return a},t.wbg.__wbindgen_string_new=function(e,n){var a=b(e,n);return c(a)},t.wbg.__wbg_view_e3b1f5dab63015c7=function(){return g(function(e,n){var a=i(e).view(i(n));return c(a)},arguments)},t.wbg.__wbg_monacomodule_9d24db234e2e1549=function(){var e=Ot();return c(e)},t.wbg.__wbg_tocsv_2ec429ab1e0bb451=function(){return g(function(e,n){var a=i(e).to_csv(p(n));return c(a)},arguments)},t.wbg.__wbg_resize_8a11e82f499e6d89=function(){return g(function(e){var n=i(e).resize();return c(n)},arguments)},t.wbg.__wbg_register_1a0bbab9f7619662=function(e,n){i(e).register(p(n))},t.wbg.__wbg_setMonarchTokensProvider_1fa51a80d68f1ac1=function(e,n,a,s){i(e).setMonarchTokensProvider(b(n,a),p(s))},t.wbg.__wbg_setLanguageConfiguration_d6c86e31029d9ef5=function(e,n,a,s){i(e).setLanguageConfiguration(b(n,a),p(s))},t.wbg.__wbg_registerCompletionItemProvider_61ecf83f366d2e16=function(e,n,a,s){i(e).registerCompletionItemProvider(b(n,a),p(s))},t.wbg.__wbg_tocolumns_d45b3454003d346b=function(){return g(function(e){var n=i(e).to_columns();return c(n)},arguments)},t.wbg.__wbg_validateexpressions_eca5656ca2844419=function(){return g(function(e,n){var a=i(e).validate_expressions(p(n));return c(a)},arguments)},t.wbg.__wbg_numrows_dfd6ed430e0147ff=function(){return g(function(e){var n=i(e).num_rows();return c(n)},arguments)},t.wbg.__wbg_columns_b15d8d6c4a353055=function(){return g(function(e){var n=i(e).columns();return c(n)},arguments)},t.wbg.__wbg_schema_b1cd087318fe451d=function(){return g(function(e){var n=i(e).schema();return c(n)},arguments)},t.wbg.__wbg_default_3edfeada4cfc405b=function(){var e=Et();return c(e)},t.wbg.__wbg_delete_cd3c8d59be8fee68=function(){return g(function(e){var n=i(e).delete();return c(n)},arguments)},t.wbg.__wbg_update_b0b2df3342b63ce2=function(){return g(function(e,n,a,s,u,l,v){var T=i(e).update(i(n),a===0?void 0:s>>>0,u===0?void 0:l>>>0,v!==0);return c(T)},arguments)},t.wbg.__wbg_toarrow_e23fb00f4ad5e9f8=function(){return g(function(e){var n=i(e).to_arrow();return c(n)},arguments)},t.wbg.__wbg_restyle_d98bfa634bd438a3=function(){return g(function(e,n){var a=i(e).restyle(i(n));return c(a)},arguments)},t.wbg.__wbg_restore_f1fbc066c9637e24=function(e,n){i(e).restore(i(n))},t.wbg.__wbg_schema_ad095ebcdb4dd76f=function(){return g(function(e){var n=i(e).schema();return c(n)},arguments)},t.wbg.__wbg_draw_f7001e36a5451367=function(){return g(function(e,n,a,s,u,l,v){var T=i(e).draw(i(n),a===0?void 0:s>>>0,u===0?void 0:l>>>0,v!==0);return c(T)},arguments)},t.wbg.__wbg_size_ea3857b7b9c01a01=function(){return g(function(e){var n=i(e).size();return c(n)},arguments)},t.wbg.__wbg_makeport_8c752476acd3fe27=function(){return g(function(e){var n=i(e).make_port();return c(n)},arguments)},t.wbg.__wbg_numcolumns_6a8d86bb12e88692=function(){return g(function(e){var n=i(e).num_columns();return c(n)},arguments)},t.wbg.__wbindgen_is_null=function(e){var n=i(e)===null;return n},t.wbg.__wbg_lineNumber_6b2a1c0159871238=function(e){var n=i(e).lineNumber;return n},t.wbg.__wbg_column_885264f87b0a4a0b=function(e){var n=i(e).column;return n},t.wbg.__wbg_findTokenIndexAtOffset_847b202bf8c16c65=function(e,n){var a=i(e).findTokenIndexAtOffset(n>>>0);return a},t.wbg.__wbg_getClassName_5bc865fe97705383=function(e,n){var a=i(e).getClassName(n>>>0);return c(a)},t.wbg.__wbg_triggerKind_9e780becc9ed4ce7=function(e){var n=i(e).triggerKind;return n},t.wbg.__wbg_delete_55c2b041a4419d5d=function(e){i(e).delete()},t.wbg.__wbg_setrenderwarning_2b6ccbc5a0b49b4f=function(e,n){i(e).render_warning=n!==0},t.wbg.__wbg_new_fa9aa30b261aba73=function(e){var n=new vt(i(e));return c(n)},t.wbg.__wbg_editor_91084c85a69a3fde=function(e){var n=i(e).editor;return c(n)},t.wbg.__wbg_languages_aca44d3eda97078c=function(e){var n=i(e).languages;return c(n)},t.wbg.__wbg_create_806f286d290f99c8=function(e,n,a){var s=i(e).create(p(n),p(a));return c(s)},t.wbg.__wbg_defineTheme_c4f18cdd46a4014d=function(e,n,a,s){i(e).defineTheme(b(n,a),p(s))},t.wbg.__wbg_setTheme_7cb365ba1d2ad549=function(e,n,a){i(e).setTheme(b(n,a))},t.wbg.__wbg_setModelMarkers_f49dfc56a0816242=function(e,n,a,s,u){i(e).setModelMarkers(i(n),b(a,s),i(u))},t.wbg.__wbg_layout_901473f7828d2488=function(e,n){i(e).layout(i(n))},t.wbg.__wbg_getModel_4ba1a741bc1eaaff=function(e){var n=i(e).getModel();return c(n)},t.wbg.__wbg_getValue_e8d4002de327ab32=function(e){var n=i(e).getValue();return c(n)},t.wbg.__wbg_setValue_464f1cd5da0d99d4=function(e,n,a){i(e).setValue(b(n,a))},t.wbg.__wbg_setPosition_53889da2861e22f4=function(e,n){i(e).setPosition(i(n))},t.wbg.__wbg_addCommand_0087418877d24153=function(e,n,a){i(e).addCommand(n>>>0,i(a))},t.wbg.__wbg_focus_d1521065885d8ced=function(e){i(e).focus()},t.wbg.__wbg_onDidChangeContent_333bdbf90ce64b26=function(e,n){i(e).onDidChangeContent(i(n))},t.wbg.__wbg_getLineTokens_6c81bc0a3f533604=function(e,n){var a=i(e).getLineTokens(n>>>0);return c(a)},t.wbg.__wbg_onupdate_b8cf42908fc20235=function(e,n){i(e).on_update(i(n))},t.wbg.__wbg_removeupdate_77fe2a7740d00e48=function(e,n){i(e).remove_update(i(n))},t.wbg.__wbg_errors_20c512f8dca36c8d=function(e){var n=i(e).errors;return c(n)},t.wbg.__wbg_expressionschema_7a07dfdf1c19fa1f=function(e){var n=i(e).expression_schema;return c(n)},t.wbg.__wbg_expressionalias_c0691678ddeeed2e=function(e){var n=i(e).expression_alias;return c(n)},t.wbg.__wbg_name_4e59ce156796a1db=function(e,n){var a=i(n).name,s=x(a,d.__wbindgen_export_0,d.__wbindgen_export_1),u=y;f()[e/4+1]=u,f()[e/4+0]=s},t.wbg.__wbg_category_3b675f446e35f445=function(e,n){var a=i(n).category,s=w(a)?0:x(a,d.__wbindgen_export_0,d.__wbindgen_export_1),u=y;f()[e/4+1]=u,f()[e/4+0]=s},t.wbg.__wbg_maxcolumns_41c0acb329b63f5a=function(e,n){var a=i(n).max_columns;f()[e/4+1]=w(a)?0:a,f()[e/4+0]=!w(a)},t.wbg.__wbg_maxcells_240ed21a2cc23a45=function(e,n){var a=i(n).max_cells;f()[e/4+1]=w(a)?0:a,f()[e/4+0]=!w(a)},t.wbg.__wbg_renderwarning_28b6ae4b73e78f68=function(e){var n=i(e).render_warning;return w(n)?16777215:n?1:0},t.wbg.__wbg_selectmode_2d072add5bfb5e92=function(e){var n=i(e).select_mode;return c(n)},t.wbg.__wbg_minconfigcolumns_fc8660538ce7232d=function(e,n){var a=i(n).min_config_columns;f()[e/4+1]=w(a)?0:a,f()[e/4+0]=!w(a)},t.wbg.__wbg_configcolumnnames_1a26628997420d20=function(e){var n=i(e).config_column_names;return w(n)?0:c(n)},t.wbg.__wbg_save_5742b4ec09ae0d34=function(e){var n=i(e).save();return c(n)},t.wbg.__wbg_new_fcda59553629199d=function(e){var n=new St(i(e));return c(n)},t.wbg.__wbg_observe_86c9286ddb2080e3=function(e,n){i(e).observe(i(n))},t.wbg.__wbg_unobserve_6d276eada6182ea1=function(e,n){i(e).unobserve(i(n))},t.wbg.__wbg_contentRect_3f8cd97f6e2969a6=function(e){var n=i(e).contentRect;return c(n)},t.wbg.__wbg_listenerid_25425097ae5fdb72=function(e,n){var a=i(n).__yew_listener_id;f()[e/4+1]=w(a)?0:a,f()[e/4+0]=!w(a)},t.wbg.__wbg_setlistenerid_007d4751f70f0e32=function(e,n){i(e).__yew_listener_id=n>>>0},t.wbg.__wbg_setsubtreeid_6966527169be2ec4=function(e,n){i(e).__yew_subtree_id=n>>>0},t.wbg.__wbg_setcachekey_a9744e4c550ca52b=function(e,n){i(e).__yew_subtree_cache_key=n>>>0},t.wbg.__wbg_subtreeid_05e7e8ba671b1a4e=function(e,n){var a=i(n).__yew_subtree_id;f()[e/4+1]=w(a)?0:a,f()[e/4+0]=!w(a)},t.wbg.__wbg_cachekey_57f0ac7b26342cf7=function(e,n){var a=i(n).__yew_subtree_cache_key;f()[e/4+1]=w(a)?0:a,f()[e/4+0]=!w(a)},t.wbg.__wbg_new_693216e109162396=function(){var e=new Error;return c(e)},t.wbg.__wbg_stack_0ddaca5d1abfb52f=function(e,n){var a=i(n).stack,s=x(a,d.__wbindgen_export_0,d.__wbindgen_export_1),u=y;f()[e/4+1]=u,f()[e/4+0]=s},t.wbg.__wbg_error_09919627ac0992f5=function(e,n){try{console.error(b(e,n))}finally{d.__wbindgen_export_15(e,n)}},t.wbg.__wbindgen_is_undefined=function(e){var n=i(e)===void 0;return n},t.wbg.__wbindgen_number_new=function(e){var n=e;return c(n)},t.wbg.__wbg_warn_2aa0e7178e1d35f6=function(e,n){var a=Je(e,n).slice();d.__wbindgen_export_15(e,n*4),console.warn(...a)},t.wbg.__wbg_newwithu8arraysequence_fdc7895dacd60d21=function(){return g(function(e){var n=new Blob(i(e));return c(n)},arguments)},t.wbg.__wbg_newwithstrsequenceandoptions_becd1cf522768c06=function(){return g(function(e,n){var a=new Blob(i(e),i(n));return c(a)},arguments)},t.wbg.__wbg_write_10adfe8afa301d18=function(e,n){var a=i(e).write(i(n));return c(a)},t.wbg.__wbg_length_294c22a18ede524b=function(e){var n=i(e).length;return n},t.wbg.__wbg_item_8eca8b8cdf63f525=function(e,n){var a=i(e).item(n>>>0);return w(a)?0:c(a)},t.wbg.__wbg_length_d2057dfdd5fdecf4=function(e){var n=i(e).length;return n},t.wbg.__wbg_getPropertyValue_937a708feb88202f=function(){return g(function(e,n,a,s){var u=i(n).getPropertyValue(b(a,s)),l=x(u,d.__wbindgen_export_0,d.__wbindgen_export_1),v=y;f()[e/4+1]=v,f()[e/4+0]=l},arguments)},t.wbg.__wbg_item_dfcc92ceae8b4304=function(e,n,a){var s=i(n).item(a>>>0),u=x(s,d.__wbindgen_export_0,d.__wbindgen_export_1),l=y;f()[e/4+1]=l,f()[e/4+0]=u},t.wbg.__wbg_setProperty_dccccce3a52c26db=function(){return g(function(e,n,a,s,u){i(e).setProperty(b(n,a),b(s,u))},arguments)},t.wbg.__wbg_instanceof_CssStyleRule_e93e1152e50f8d9b=function(e){var n=i(e)instanceof CSSStyleRule;return n},t.wbg.__wbg_selectorText_56b42d9cf7c91aa1=function(e,n){var a=i(n).selectorText,s=x(a,d.__wbindgen_export_0,d.__wbindgen_export_1),u=y;f()[e/4+1]=u,f()[e/4+0]=s},t.wbg.__wbg_style_dbd768c92c03ab2c=function(e){var n=i(e).style;return c(n)},t.wbg.__wbg_cssRules_b1206f989651c44d=function(){return g(function(e){var n=i(e).cssRules;return c(n)},arguments)},t.wbg.__wbg_new_3af016a292a0ea38=function(){return g(function(e,n){var a=new CustomEvent(b(e,n));return c(a)},arguments)},t.wbg.__wbg_newwitheventinitdict_183544aa2c542424=function(){return g(function(e,n,a){var s=new CustomEvent(b(e,n),i(a));return c(s)},arguments)},t.wbg.__wbg_setDragImage_97e7f5b52f6e9f92=function(e,n,a,s){i(e).setDragImage(i(n),a,s)},t.wbg.__wbg_readyState_be8f2b804adc7ff6=function(e,n){var a=i(n).readyState,s=x(a,d.__wbindgen_export_0,d.__wbindgen_export_1),u=y;f()[e/4+1]=u,f()[e/4+0]=s},t.wbg.__wbg_body_525168d9e773c3f8=function(e){var n=i(e).body;return w(n)?0:c(n)},t.wbg.__wbg_styleSheets_a23fea89b8b91939=function(e){var n=i(e).styleSheets;return c(n)},t.wbg.__wbg_fonts_62f407546d8daeb4=function(e){var n=i(e).fonts;return c(n)},t.wbg.__wbg_createElement_ac65a6ce60c4812c=function(){return g(function(e,n,a){var s=i(e).createElement(b(n,a));return c(s)},arguments)},t.wbg.__wbg_createElementNS_267edeea0c97331c=function(){return g(function(e,n,a,s,u){var l=i(e).createElementNS(n===0?void 0:b(n,a),b(s,u));return c(l)},arguments)},t.wbg.__wbg_createTextNode_442392ad92e75695=function(e,n,a){var s=i(e).createTextNode(b(n,a));return c(s)},t.wbg.__wbg_width_a04d387a0e0ffe94=function(e){var n=i(e).width;return n},t.wbg.__wbg_height_f7c5c956730ab37a=function(e){var n=i(e).height;return n},t.wbg.__wbg_width_4a83a800a544b73a=function(e){var n=i(e).width;return n},t.wbg.__wbg_height_76d64c7ff32eb400=function(e){var n=i(e).height;return n},t.wbg.__wbg_top_22e7024d271b5677=function(e){var n=i(e).top;return n},t.wbg.__wbg_left_f2f24ba3851b8295=function(e){var n=i(e).left;return n},t.wbg.__wbg_get_dc5a3f4246f4363e=function(e,n,a,s){var u=i(n)[b(a,s)],l=w(u)?0:x(u,d.__wbindgen_export_0,d.__wbindgen_export_1),v=y;f()[e/4+1]=v,f()[e/4+0]=l},t.wbg.__wbg_set_6bc5ebabff049b08=function(){return g(function(e,n,a,s,u){i(e)[b(n,a)]=b(s,u)},arguments)},t.wbg.__wbg_delete_bdb7962606ab7ffc=function(e,n,a){delete i(e)[b(n,a)]},t.wbg.__wbg_add_3b4cecc512643e9f=function(){return g(function(e,n,a){i(e).add(b(n,a))},arguments)},t.wbg.__wbg_remove_c15603553c81dc31=function(){return g(function(e,n,a){i(e).remove(b(n,a))},arguments)},t.wbg.__wbg_dataTransfer_7916d51ea966dcb4=function(e){var n=i(e).dataTransfer;return w(n)?0:c(n)},t.wbg.__wbg_instanceof_Element_8143882371652178=function(e){var n=i(e)instanceof Element;return n},t.wbg.__wbg_namespaceURI_f65a7a956acf4bc5=function(e,n){var a=i(n).namespaceURI,s=w(a)?0:x(a,d.__wbindgen_export_0,d.__wbindgen_export_1),u=y;f()[e/4+1]=u,f()[e/4+0]=s},t.wbg.__wbg_classList_bbb57a7d3cc23c85=function(e){var n=i(e).classList;return c(n)},t.wbg.__wbg_scrollTop_03d79a099b9a21e7=function(e){var n=i(e).scrollTop;return n},t.wbg.__wbg_setscrollTop_b9abc042a6938811=function(e,n){i(e).scrollTop=n},t.wbg.__wbg_clientWidth_acc83939b1545b91=function(e){var n=i(e).clientWidth;return n},t.wbg.__wbg_clientHeight_95c707ac8248c652=function(e){var n=i(e).clientHeight;return n},t.wbg.__wbg_children_283b5c3c4312d771=function(e){var n=i(e).children;return c(n)},t.wbg.__wbg_attachShadow_f0d8083616f120aa=function(){return g(function(e,n){var a=i(e).attachShadow(i(n));return c(a)},arguments)},t.wbg.__wbg_getAttribute_0754c52f6bcda842=function(e,n,a,s){var u=i(n).getAttribute(b(a,s)),l=w(u)?0:x(u,d.__wbindgen_export_0,d.__wbindgen_export_1),v=y;f()[e/4+1]=v,f()[e/4+0]=l},t.wbg.__wbg_getBoundingClientRect_dbd899b7c945c55d=function(e){var n=i(e).getBoundingClientRect();return c(n)},t.wbg.__wbg_hasAttribute_4c5fc91198e862c3=function(e,n,a){var s=i(e).hasAttribute(b(n,a));return s},t.wbg.__wbg_matches_7e22d2c3664b9d8d=function(){return g(function(e,n,a){var s=i(e).matches(b(n,a));return s},arguments)},t.wbg.__wbg_removeAttribute_16e5bf3866aa53e8=function(){return g(function(e,n,a){i(e).removeAttribute(b(n,a))},arguments)},t.wbg.__wbg_setAttribute_27ca65e30a1c3c4a=function(){return g(function(e,n,a,s,u){i(e).setAttribute(b(n,a),b(s,u))},arguments)},t.wbg.__wbg_toggleAttribute_8cf952af952c2cc5=function(){return g(function(e,n,a,s){var u=i(e).toggleAttribute(b(n,a),s!==0);return u},arguments)},t.wbg.__wbg_target_2dfa485f32a6d005=function(e){var n=i(e).target;return w(n)?0:c(n)},t.wbg.__wbg_cancelBubble_185bb624c1c2e4ee=function(e){var n=i(e).cancelBubble;return n},t.wbg.__wbg_composedPath_85cb5c926bd8d924=function(e){var n=i(e).composedPath();return c(n)},t.wbg.__wbg_preventDefault_7c4d18eb2bb1a26a=function(e){i(e).preventDefault()},t.wbg.__wbg_stopPropagation_11ccdc30c46ad19a=function(e){i(e).stopPropagation()},t.wbg.__wbg_addEventListener_936431894dca4639=function(){return g(function(e,n,a,s){i(e).addEventListener(b(n,a),i(s))},arguments)},t.wbg.__wbg_addEventListener_6d9a78a5d277bdaf=function(){return g(function(e,n,a,s,u){i(e).addEventListener(b(n,a),i(s),i(u))},arguments)},t.wbg.__wbg_dispatchEvent_bacbc3eeb0d17fcd=function(){return g(function(e,n){var a=i(e).dispatchEvent(i(n));return a},arguments)},t.wbg.__wbg_removeEventListener_6e1e9e37bdc74923=function(){return g(function(e,n,a,s){i(e).removeEventListener(b(n,a),i(s))},arguments)},t.wbg.__wbg_instanceof_FontFace_095633da5a60e4d1=function(e){var n=i(e)instanceof FontFace;return n},t.wbg.__wbg_family_8b33871beb47388b=function(e,n){var a=i(n).family,s=x(a,d.__wbindgen_export_0,d.__wbindgen_export_1),u=y;f()[e/4+1]=u,f()[e/4+0]=s},t.wbg.__wbg_weight_cb1f0ded9c3fcd29=function(e,n){var a=i(n).weight,s=x(a,d.__wbindgen_export_0,d.__wbindgen_export_1),u=y;f()[e/4+1]=u,f()[e/4+0]=s},t.wbg.__wbg_loaded_b07b4ee5c31f9abc=function(){return g(function(e){var n=i(e).loaded;return c(n)},arguments)},t.wbg.__wbg_values_705706cce046e96c=function(e){var n=i(e).values();return c(n)},t.wbg.__wbg_next_c7f69285044a0543=function(){return g(function(e){var n=i(e).next();return c(n)},arguments)},t.wbg.__wbg_item_5a5f92bba46832d3=function(e,n){var a=i(e).item(n>>>0);return w(a)?0:c(a)},t.wbg.__wbg_dataset_7f3bc0a0cd4f7382=function(e){var n=i(e).dataset;return c(n)},t.wbg.__wbg_style_25309daade79abb3=function(e){var n=i(e).style;return c(n)},t.wbg.__wbg_offsetParent_21a2a48c194cfe05=function(e){var n=i(e).offsetParent;return w(n)?0:c(n)},t.wbg.__wbg_offsetWidth_7dd96a3df070d552=function(e){var n=i(e).offsetWidth;return n},t.wbg.__wbg_offsetHeight_fe07e4498698e768=function(e){var n=i(e).offsetHeight;return n},t.wbg.__wbg_blur_b336d41728268f5a=function(){return g(function(e){i(e).blur()},arguments)},t.wbg.__wbg_click_a22518ab89bfd9b8=function(e){i(e).click()},t.wbg.__wbg_focus_2fac919cca20d33b=function(){return g(function(e){i(e).focus()},arguments)},t.wbg.__wbg_checked_dc000202a8fa9328=function(e){var n=i(e).checked;return n},t.wbg.__wbg_setchecked_dc7daac77dc0e73e=function(e,n){i(e).checked=n!==0},t.wbg.__wbg_value_f4c762446c572119=function(e,n){var a=i(n).value,s=x(a,d.__wbindgen_export_0,d.__wbindgen_export_1),u=y;f()[e/4+1]=u,f()[e/4+0]=s},t.wbg.__wbg_setvalue_65a652cfd99c8a4a=function(e,n,a){i(e).value=b(n,a)},t.wbg.__wbg_value_265001c20fda4531=function(e,n){var a=i(n).value,s=x(a,d.__wbindgen_export_0,d.__wbindgen_export_1),u=y;f()[e/4+1]=u,f()[e/4+0]=s},t.wbg.__wbg_setvalue_a46eeb72562081c1=function(e,n,a){i(e).value=b(n,a)},t.wbg.__wbg_value_d8dfe9a459c6ea2a=function(e,n){var a=i(n).value,s=x(a,d.__wbindgen_export_0,d.__wbindgen_export_1),u=y;f()[e/4+1]=u,f()[e/4+0]=s},t.wbg.__wbg_setvalue_b1b2f2945b1cb6ef=function(e,n,a){i(e).value=b(n,a)},t.wbg.__wbg_keyCode_218ac9c01e06b3d5=function(e){var n=i(e).keyCode;return n},t.wbg.__wbg_clientX_5bbce6c078e1510e=function(e){var n=i(e).clientX;return n},t.wbg.__wbg_clientY_af6c4369507b54f0=function(e){var n=i(e).clientY;return n},t.wbg.__wbg_shiftKey_257c3f6b1ca35555=function(e){var n=i(e).shiftKey;return n},t.wbg.__wbg_relatedTarget_c63203073e65b8de=function(e){var n=i(e).relatedTarget;return w(n)?0:c(n)},t.wbg.__wbg_clipboard_a304e2b83d0400c6=function(e){var n=i(e).clipboard;return c(n)},t.wbg.__wbg_isConnected_021a4fb42a3d7537=function(e){var n=i(e).isConnected;return n},t.wbg.__wbg_parentNode_e1dd029be06cee39=function(e){var n=i(e).parentNode;return w(n)?0:c(n)},t.wbg.__wbg_parentElement_b8943ca3eef7678d=function(e){var n=i(e).parentElement;return w(n)?0:c(n)},t.wbg.__wbg_lastChild_60bd092ff114802e=function(e){var n=i(e).lastChild;return w(n)?0:c(n)},t.wbg.__wbg_setnodeValue_ef88f21c4f2101f5=function(e,n,a){i(e).nodeValue=n===0?void 0:b(n,a)},t.wbg.__wbg_appendChild_6ed236bb79c198df=function(){return g(function(e,n){var a=i(e).appendChild(i(n));return c(a)},arguments)},t.wbg.__wbg_contains_11705db278357c60=function(e,n){var a=i(e).contains(i(n));return a},t.wbg.__wbg_insertBefore_7159f24556965e30=function(){return g(function(e,n,a){var s=i(e).insertBefore(i(n),i(a));return c(s)},arguments)},t.wbg.__wbg_removeChild_f633f19eb895b696=function(){return g(function(e,n){var a=i(e).removeChild(i(n));return c(a)},arguments)},t.wbg.__wbg_now_44a034aa2e1d73dd=function(e){var n=i(e).now();return n},t.wbg.__wbg_instanceof_ShadowRoot_17fc69013b5c44c6=function(e){var n=i(e)instanceof ShadowRoot;return n},t.wbg.__wbg_host_786667ae381479f7=function(e){var n=i(e).host;return c(n)},t.wbg.__wbg_length_568451d1cca15a65=function(e){var n=i(e).length;return n},t.wbg.__wbg_item_48316bfa2c39d796=function(e,n){var a=i(e).item(n>>>0);return w(a)?0:c(a)},t.wbg.__wbg_createObjectURL_a97d76bcc0a4968c=function(){return g(function(e,n){var a=URL.createObjectURL(i(n)),s=x(a,d.__wbindgen_export_0,d.__wbindgen_export_1),u=y;f()[e/4+1]=u,f()[e/4+0]=s},arguments)},t.wbg.__wbg_instanceof_Window_11e25482011fc506=function(e){var n=i(e)instanceof Window;return n},t.wbg.__wbg_document_5aff8cd83ef968f5=function(e){var n=i(e).document;return w(n)?0:c(n)},t.wbg.__wbg_navigator_5c90643c2a2b6cda=function(e){var n=i(e).navigator;return c(n)},t.wbg.__wbg_innerWidth_8c5001da2fdd6a9e=function(){return g(function(e){var n=i(e).innerWidth;return c(n)},arguments)},t.wbg.__wbg_innerHeight_03d3f1d9eb5f7034=function(){return g(function(e){var n=i(e).innerHeight;return c(n)},arguments)},t.wbg.__wbg_performance_9d1ecf711183e1d5=function(e){var n=i(e).performance;return w(n)?0:c(n)},t.wbg.__wbg_getComputedStyle_344a4d9212ebf966=function(){return g(function(e,n){var a=i(e).getComputedStyle(i(n));return w(a)?0:c(a)},arguments)},t.wbg.__wbg_requestAnimationFrame_1fb079d39e1b8a26=function(){return g(function(e,n){var a=i(e).requestAnimationFrame(i(n));return a},arguments)},t.wbg.__wbg_setTimeout_ce28a603906ebcbb=function(){return g(function(e,n,a){var s=i(e).setTimeout(i(n),a);return s},arguments)},t.wbg.__wbg_error_d95afd6217cfd219=function(e){console.error(i(e))},t.wbg.__wbg_error_0147c5cf9d9745cf=function(e,n,a){console.error(i(e),i(n),i(a))},t.wbg.__wbg_log_9a99fb1af846153b=function(e){console.log(i(e))},t.wbg.__wbg_warn_b39e749f1dc02058=function(e){console.warn(i(e))},t.wbg.__wbg_self_bb69a836a72ec6e9=function(){return g(function(){var e=self.self;return c(e)},arguments)},t.wbg.__wbg_window_3304fc4b414c9693=function(){return g(function(){var e=window.window;return c(e)},arguments)},t.wbg.__wbg_globalThis_e0d21cabc6630763=function(){return g(function(){var e=globalThis.globalThis;return c(e)},arguments)},t.wbg.__wbg_global_8463719227271676=function(){return g(function(){var e=global.global;return c(e)},arguments)},t.wbg.__wbg_newnoargs_9fdd8f3961dd1bee=function(e,n){var a=new Function(b(e,n));return c(a)},t.wbg.__wbg_new_515b65a8e7699d00=function(){var e=new Array;return c(e)},t.wbg.__wbg_get_b7bbf50adcc94294=function(e,n){var a=i(e)[n>>>0];return c(a)},t.wbg.__wbg_length_555f836564bf148d=function(e){var n=i(e).length;return n},t.wbg.__wbg_push_b7f68478f81d358b=function(e,n){var a=i(e).push(i(n));return a},t.wbg.__wbg_instanceof_ArrayBuffer_1ae2a91a8421001f=function(e){var n=i(e)instanceof ArrayBuffer;return n},t.wbg.__wbg_slice_3563f88f39165260=function(e,n,a){var s=i(e).slice(n>>>0,a>>>0);return c(s)},t.wbg.__wbg_instanceof_Error_2ef86611e2afab04=function(e){var n=i(e)instanceof Error;return n},t.wbg.__wbg_message_e440fbd911a845a2=function(e){var n=i(e).message;return c(n)},t.wbg.__wbg_call_ba36642bd901572b=function(){return g(function(e,n){var a=i(e).call(i(n));return c(a)},arguments)},t.wbg.__wbg_call_3fc07b7d5fc9022d=function(){return g(function(e,n,a){var s=i(e).call(i(n),i(a));return c(s)},arguments)},t.wbg.__wbg_getTimezoneOffset_baab8599eeb15f06=function(e){var n=i(e).getTimezoneOffset();return n},t.wbg.__wbg_new_f994c74215dcdb52=function(e){var n=new Date(i(e));return c(n)},t.wbg.__wbg_is_a973b4c0e9019083=function(e,n){var a=Object.is(i(e),i(n));return a},t.wbg.__wbg_keys_a56f3f1587eb77e9=function(e){var n=Object.keys(i(e));return c(n)},t.wbg.__wbg_new_edbe38a4e21329dd=function(){var e=new Object;return c(e)},t.wbg.__wbg_get_800098c980b31ea2=function(){return g(function(e,n){var a=Reflect.get(i(e),i(n));return c(a)},arguments)},t.wbg.__wbg_has_9fa0c068863afd36=function(){return g(function(e,n){var a=Reflect.has(i(e),i(n));return a},arguments)},t.wbg.__wbg_set_73349fc4814e0fc6=function(){return g(function(e,n,a){var s=Reflect.set(i(e),i(n),i(a));return s},arguments)},t.wbg.__wbg_buffer_9e184d6f785de5ed=function(e){var n=i(e).buffer;return c(n)},t.wbg.__wbg_stringify_08a99e601b91c4a7=function(){return g(function(e){var n=JSON.stringify(i(e));return c(n)},arguments)},t.wbg.__wbg_new_c143a4f563f78c4e=function(e,n){try{var a={a:e,b:n},s=(l,v)=>{let T=a.a;a.a=0;try{return Xt(T,a.b,l,v)}finally{a.a=T}},u=new Promise(s);return c(u)}finally{a.a=a.b=0}},t.wbg.__wbg_resolve_cae3d8f752f5db88=function(e){var n=Promise.resolve(i(e));return c(n)},t.wbg.__wbg_then_c2361a9d5c9a4fcb=function(e,n){var a=i(e).then(i(n));return c(a)},t.wbg.__wbg_then_6c9a4bf55755f9b8=function(e,n,a){var s=i(e).then(i(n),i(a));return c(s)},t.wbg.__wbg_newwithbyteoffsetandlength_e57ad1f2ce812c03=function(e,n,a){var s=new Uint8Array(i(e),n>>>0,a>>>0);return c(s)},t.wbg.__wbg_new_e8101319e4cf95fc=function(e){var n=new Uint8Array(i(e));return c(n)},t.wbg.__wbg_buffer_1c5918a4ab656ff7=function(e){var n=i(e).buffer;return c(n)},t.wbg.__wbg_length_2d56cb37075fcfb1=function(e){var n=i(e).length;return n},t.wbg.__wbg_byteLength_e0515bc94cfc5dee=function(e){var n=i(e).byteLength;return n},t.wbg.__wbg_byteOffset_77eec84716a2e737=function(e){var n=i(e).byteOffset;return n},t.wbg.__wbg_set_e8ae7b27314e8b98=function(e,n,a){i(e).set(i(n),a>>>0)},t.wbg.__wbindgen_number_get=function(e,n){let a=i(n);var s=typeof a=="number"?a:void 0;It()[e/8+1]=w(s)?0:s,f()[e/4+0]=!w(s)},t.wbg.__wbindgen_is_string=function(e){var n=typeof i(e)=="string";return n},t.wbg.__wbindgen_string_get=function(e,n){let a=i(n);var s=typeof a=="string"?a:void 0,u=w(s)?0:x(s,d.__wbindgen_export_0,d.__wbindgen_export_1),l=y;f()[e/4+1]=l,f()[e/4+0]=u},t.wbg.__wbindgen_boolean_get=function(e){let n=i(e);var a=typeof n=="boolean"?n?1:0:2;return a},t.wbg.__wbindgen_throw=function(e,n){throw new Error(b(e,n))},t.wbg.__wbindgen_rethrow=function(e){throw p(e)},t.wbg.__wbindgen_memory=function(){var e=d.memory;return c(e)},t.wbg.__wbindgen_closure_wrapper3375=function(e,n,a){var s=R(e,n,30,Ct);return c(s)},t.wbg.__wbindgen_closure_wrapper3377=function(e,n,a){var s=R(e,n,32,Lt);return c(s)},t.wbg.__wbindgen_closure_wrapper3379=function(e,n,a){var s=R(e,n,38,At);return c(s)},t.wbg.__wbindgen_closure_wrapper3381=function(e,n,a){var s=R(e,n,26,Pt);return c(s)},t.wbg.__wbindgen_closure_wrapper3383=function(e,n,a){var s=ne(e,n,36,Ht);return c(s)},t.wbg.__wbindgen_closure_wrapper3385=function(e,n,a){var s=ne(e,n,28,Nt);return c(s)},t.wbg.__wbindgen_closure_wrapper3387=function(e,n,a){var s=ne(e,n,40,Mt);return c(s)},t.wbg.__wbindgen_closure_wrapper3389=function(e,n,a){var s=ne(e,n,34,Rt);return c(s)},t.wbg.__wbindgen_closure_wrapper10795=function(e,n,a){var s=R(e,n,2389,Ut);return c(s)},t.wbg.__wbindgen_closure_wrapper10816=function(e,n,a){var s=R(e,n,2393,Yt);return c(s)},t.wbg.__wbindgen_closure_wrapper10897=function(e,n,a){var s=R(e,n,2411,Ft);return c(s)},(typeof r=="string"||typeof Request=="function"&&r instanceof Request||typeof URL=="function"&&r instanceof URL)&&(r=fetch(r));let{instance:o,module:_}=await Vt(await r,t);return d=o.exports,Ge.__wbindgen_wasm_module=_,d}var qt=Ge,D=Uint8Array,A=Uint16Array,Te=Uint32Array,Ke=new D([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ze=new D([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Jt=new D([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Qe=function(r,t){for(var o=new A(31),_=0;_<31;++_)o[_]=t+=1<<r[_-1];for(var e=new Te(o[30]),_=1;_<30;++_)for(var n=o[_];n<o[_+1];++n)e[n]=n-o[_]<<5|_;return[o,e]},et=Qe(Ke,2),tt=et[0],Gt=et[1];tt[28]=258,Gt[258]=28;var nt=Qe(Ze,0),Kt=nt[0],tr=nt[1],De=new A(32768);for(h=0;h<32768;++h)I=(h&43690)>>>1|(h&21845)<<1,I=(I&52428)>>>2|(I&13107)<<2,I=(I&61680)>>>4|(I&3855)<<4,De[h]=((I&65280)>>>8|(I&255)<<8)>>>1;var I,h,X=function(r,t,o){for(var _=r.length,e=0,n=new A(t);e<_;++e)r[e]&&++n[r[e]-1];var a=new A(t);for(e=0;e<t;++e)a[e]=a[e-1]+n[e-1]<<1;var s;if(o){s=new A(1<<t);var u=15-t;for(e=0;e<_;++e)if(r[e])for(var l=e<<4|r[e],v=t-r[e],T=a[r[e]-1]++<<v,N=T|(1<<v)-1;T<=N;++T)s[De[T]>>>u]=l}else for(s=new A(_),e=0;e<_;++e)r[e]&&(s[e]=De[a[r[e]-1]++]>>>15-r[e]);return s},V=new D(288);for(h=0;h<144;++h)V[h]=8;var h;for(h=144;h<256;++h)V[h]=9;var h;for(h=256;h<280;++h)V[h]=7;var h;for(h=280;h<288;++h)V[h]=8;var h,rt=new D(32);for(h=0;h<32;++h)rt[h]=5;var h,Zt=X(V,9,1),Qt=X(rt,5,1),Ee=function(r){for(var t=r[0],o=1;o<r.length;++o)r[o]>t&&(t=r[o]);return t},k=function(r,t,o){var _=t/8|0;return(r[_]|r[_+1]<<8)>>(t&7)&o},Oe=function(r,t){var o=t/8|0;return(r[o]|r[o+1]<<8|r[o+2]<<16)>>(t&7)},en=function(r){return(r+7)/8|0},oe=function(r,t,o){(t==null||t<0)&&(t=0),(o==null||o>r.length)&&(o=r.length);var _=new(r instanceof A?A:r instanceof Te?Te:D)(o-t);return _.set(r.subarray(t,o)),_},tn=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(r,t,o){var _=new Error(t||tn[r]);if(_.code=r,Error.captureStackTrace&&Error.captureStackTrace(_,E),!o)throw _;return _},nn=function(r,t,o){var _=r.length;if(!_||o&&o.f&&!o.l)return t||new D(0);var e=!t||o,n=!o||o.i;o||(o={}),t||(t=new D(_*3));var a=function($e){var Fe=t.length;if($e>Fe){var ze=new D(Math.max(Fe*2,$e));ze.set(t),t=ze}},s=o.f||0,u=o.p||0,l=o.b||0,v=o.l,T=o.d,N=o.m,F=o.n,ce=_*8;do{if(!v){s=k(r,u,1);var ue=k(r,u+1,3);if(u+=3,ue)if(ue==1)v=Zt,T=Qt,N=9,F=5;else if(ue==2){var de=k(r,u,31)+257,Pe=k(r,u+10,15)+4,He=de+k(r,u+5,31)+1;u+=14;for(var z=new D(He),ge=new D(19),O=0;O<Pe;++O)ge[Jt[O]]=k(r,u+O*3,7);u+=Pe*3;for(var Ne=Ee(ge),wt=(1<<Ne)-1,pt=X(ge,Ne,1),O=0;O<He;){var Me=pt[k(r,u,wt)];u+=Me&15;var j=Me>>>4;if(j<16)z[O++]=j;else{var Y=0,G=0;for(j==16?(G=3+k(r,u,3),u+=2,Y=z[O-1]):j==17?(G=3+k(r,u,7),u+=3):j==18&&(G=11+k(r,u,127),u+=7);G--;)z[O++]=Y}}var Re=z.subarray(0,de),L=z.subarray(de);N=Ee(Re),F=Ee(L),v=X(Re,N,1),T=X(L,F,1)}else E(1);else{var j=en(u)+4,le=r[j-4]|r[j-3]<<8,fe=j+le;if(fe>_){n&&E(0);break}e&&a(l+le),t.set(r.subarray(j,fe),l),o.b=l+=le,o.p=u=fe*8,o.f=s;continue}if(u>ce){n&&E(0);break}}e&&a(l+131072);for(var ht=(1<<N)-1,mt=(1<<F)-1,be=u;;be=u){var Y=v[Oe(r,u)&ht],$=Y>>>4;if(u+=Y&15,u>ce){n&&E(0);break}if(Y||E(2),$<256)t[l++]=$;else if($==256){be=u,v=null;break}else{var Ue=$-254;if($>264){var O=$-257,B=Ke[O];Ue=k(r,u,(1<<B)-1)+tt[O],u+=B}var we=T[Oe(r,u)&mt],pe=we>>>4;we||E(3),u+=we&15;var L=Kt[pe];if(pe>3){var B=Ze[pe];L+=Oe(r,u)&(1<<B)-1,u+=B}if(u>ce){n&&E(0);break}e&&a(l+131072);for(var Ye=l+Ue;l<Ye;l+=4)t[l]=t[l-L],t[l+1]=t[l+1-L],t[l+2]=t[l+2-L],t[l+3]=t[l+3-L];l=Ye}}o.l=v,o.p=be,o.b=l,o.f=s,v&&(s=1,o.m=N,o.d=T,o.n=F)}while(!s);return l==t.length?t:oe(t,0,l)},rn=new D(0),an=function(r){(r[0]!=31||r[1]!=139||r[2]!=8)&&E(6,"invalid gzip data");var t=r[3],o=10;t&4&&(o+=r[10]|(r[11]<<8)+2);for(var _=(t>>3&1)+(t>>4&1);_>0;_-=!r[o++]);return o+(t&2)},U=function(){function r(t){this.s={},this.p=new D(0),this.ondata=t}return r.prototype.e=function(t){this.ondata||E(5),this.d&&E(4);var o=this.p.length,_=new D(o+t.length);_.set(this.p),_.set(t,o),this.p=_},r.prototype.c=function(t){this.d=this.s.i=t||!1;var o=this.s.b,_=nn(this.p,this.o,this.s);this.ondata(oe(_,o,this.s.b),this.d),this.o=oe(_,this.s.b-32768),this.s.b=this.o.length,this.p=oe(this.p,this.s.p/8|0),this.s.p&=7},r.prototype.push=function(t,o){this.e(t),this.c(o)},r}(),on=function(){function r(t){this.v=1,U.call(this,t)}return r.prototype.push=function(t,o){if(U.prototype.e.call(this,t),this.v){var _=this.p.length>3?an(this.p):4;if(_>=this.p.length&&!o)return;this.p=this.p.subarray(_),this.v=0}o&&(this.p.length<8&&E(6,"invalid gzip data"),this.p=this.p.subarray(0,-8)),U.prototype.c.call(this,o)},r}(),_n=function(){function r(t){this.v=1,U.call(this,t)}return r.prototype.push=function(t,o){if(U.prototype.e.call(this,t),this.v){if(this.p.length<2&&!o)return;this.p=this.p.subarray(2),this.v=0}o&&(this.p.length<4&&E(6,"invalid zlib data"),this.p=this.p.subarray(0,-4)),U.prototype.c.call(this,o)},r}(),sn=function(){function r(t){this.G=on,this.I=U,this.Z=_n,this.ondata=t}return r.prototype.push=function(t,o){if(this.ondata||E(5),this.s)this.s.push(t,o);else{if(this.p&&this.p.length){var _=new D(this.p.length+t.length);_.set(this.p),_.set(t,this.p.length)}else this.p=t;if(this.p.length>2){var e=this,n=function(){e.ondata.apply(e,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(n):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(n):new this.Z(n),this.s.push(this.p,o),this.p=null}}},r}(),cn=typeof TextDecoder!="undefined"&&new TextDecoder,un=0;try{cn.decode(rn,{stream:!0}),un=1}catch{}var dn="./perspective_viewer_bg.wasm";async function gn(){return new URL(dn,import.meta.url)}var ln=gn();window.addEventListener("unhandledrejection",r=>{r.reason?.message==="View method cancelled"&&r.preventDefault()});function Se(r){return new Uint32Array(r.slice(0,4))[0]==559903}async function fn(){let r=await ln,t=[],o=0,_=new sn(a=>{a&&(o+=a.byteLength,t.push(a))});if(r instanceof URL||typeof r=="string"){let a=(await fetch(r.toString())).body.getReader(),s=0;for(;;){let{value:u,done:l}=await a.read();if(l)break;s===0&&Se(u.buffer)||s===1?(s=1,_.push(u,l)):(s=2,o+=u.byteLength,t.push(u))}}else if(r instanceof Uint8Array)Se(r.buffer)?_.push(r,!0):(o=r.byteLength,t=[r]);else{let a=new Uint8Array(r);Se(r)?_.push(a,!0):(o=a.byteLength,t=[a])}let e=0,n=new Uint8Array(o);for(let a of t)n.set(a,e),e+=a.byteLength;return await qt(n)}var ke=fn(),at=class extends HTMLElement{constructor(){super();this.load_wasm()}async load_wasm(){await ke,this.instance||(this.instance=new xe(this))}async connectedCallback(){await this.load_wasm(),this.instance.connected_callback()}static async registerPlugin(r){await ke,Bt(r)}async load(r){await this.load_wasm(),await this.instance.js_load(Promise.resolve(r))}async notifyResize(r=!1){await this.load_wasm(),await this.instance.js_resize(r)}async setAutoSize(r=!0){await this.load_wasm(),await this.instance.js_set_auto_size(r)}async getTable(r){return await this.load_wasm(),await this.instance.js_get_table(!!r)}async getView(){return await this.load_wasm(),await this.instance.js_get_view()}async restore(r){await this.load_wasm(),await this.instance.js_restore(r)}async save(r){return await this.load_wasm(),await this.instance.js_save(r)}async flush(){await this.load_wasm(),await this.instance.js_flush()}async reset(r=!1){await this.load_wasm(),await this.instance.js_reset(r)}async delete(){await this.load_wasm(),await this.instance.js_delete()}async download(r){await this.load_wasm(),await this.instance.js_download(r)}async copy(r){await this.load_wasm(),await this.instance.js_copy(r)}async restyleElement(){await this.load_wasm(),await this.instance.js_restyle_element()}async resetThemes(r){await this.load_wasm(),await this.instance.js_reset_themes(r)}async getEditPort(){return await this.load_wasm(),await this.instance.js_get_edit_port()}async setThrottle(r){await this.load_wasm(),await this.instance.js_set_throttle(r)}async toggleConfig(r){await this.load_wasm(),await this.instance.js_toggle_config(r)}async getPlugin(r){return await this.load_wasm(),await this.instance.js_get_plugin(r)}async getAllPlugins(){return await this.load_wasm(),await this.instance.js_get_all_plugins()}async unsafe_get_model(){return await this.load_wasm(),await this.instance.js_unsafe_get_model()}static async getExprtkCommands(){return await ke,Wt()}};document.createElement("perspective-viewer").constructor===HTMLElement&&window.customElements.define("perspective-viewer",at);function nr(r,{warn:t=!0,replace_defaults:o=!1}={}){if(typeof r=="object"&&!(r instanceof ArrayBuffer)){let _=JSON.parse(JSON.stringify(r));return"viewers"in _&&"detail"in _?bn(_,{warn:t,replace_defaults:o}):ot(_,!1,{warn:t,replace_defaults:o})}else return r}function bn(r,t){for(let o in r.viewers)r.viewers[o]=ot(r.viewers[o],!0,t),"master"in r.viewers[o]||(r.viewers[o].master=!1,t.warn&&console.warn('Deprecated perspective missing attribute "master" set to default')),"linked"in r.viewers[o]||(r.viewers[o].linked=!1,t.warn&&console.warn('Deprecated perspective missing attribute "linked" set to default'));return r}function ot(r,t,o){return wn(r,[hn,mn,vn,xn,o.replace_defaults?pn:!1,Tn,Dn,t?On:En].filter(_=>!!_),o)}function wn(r,t,o){for(let _ of t)r=_(r,o);return r}function pn(r,t){for(let o of["group_by","split_by","filter","sort"])r[o]===null&&(r[o]=[],t.warn&&console.warn(`Deprecated perspective missing attribute "${o}" set to default"`)),"aggregates"in r&&r.aggregates===null&&(r.aggregates={},t.warn&&console.warn('Deprecated perspective missing attribute "aggregates" set to default"'));return r}function je(r,t){return function(o,_){let e=0;for(let n of t)if(n in o){if(e++>0)throw new Error(`Duplicate "${r}" fields`);o[r]=o[n],n!==r&&(delete o[n],_.warn&&console.warn(`Deprecated perspective attribute "${n}" renamed "${r}"`))}return o}}var hn=je("group_by",["group_by","row_pivots","row-pivot","row-pivots","row_pivot"]),mn=je("split_by",["split_by","column_pivots","column-pivot","column-pivots","column_pivot","col_pivots","col-pivot","col-pivots","col_pivot"]),vn=je("filter",["filter","filters"]);function yn(r,t,o,_,e){if(r.test(o)){let n=o.replace(r,t);e.warn&&console.warn(`Deprecated perspective "expression" attribute value "${o}" updated to "${n}"`);for(let a of["group_by","split_by"])if(a in _)for(let s in _[a])_[a][s]===o.replace(/"/g,"")&&(_[a][s]=n,e.warn&&console.warn(`Deprecated perspective expression in "${a}" attribute "${o}" replaced with "${n}"`));for(let a of _.filter||[])a[0]===o.replace(/"/g,"")&&(a[0]=n,e.warn&&console.warn(`Deprecated perspective expression in "filter" attribute "${o}" replaced with "${n}"`));for(let a of _.sort||[])a[0]===o.replace(/"/g,"")&&(a[0]=n,e.warn&&console.warn(`Deprecated perspective expression in "sort" attribute "${o}" replaced with "${n}"`));return n}else return o}function xn(r,t){if(r["computed-columns"]){if("expressions"in r)throw new Error('Duplicate "expressions" and "computed-columns');r.expressions=r["computed-columns"],delete r["computed-columns"],t.warn&&console.warn('Deprecated perspective attribute "computed-columns" renamed "expressions"');let o=[[/^year_bucket\("(.+?)"\)/,`bucket("$1", 'y')`],[/^month_bucket\("(.+?)"\)/,`bucket("$1", 'M')`],[/^day_bucket\("(.+?)"\)/,`bucket("$1", 'd')`],[/^hour_bucket\("(.+?)"\)/,`bucket("$1", 'h')`],[/^minute_bucket\("(.+?)"\)/,`bucket("$1", 'm')`],[/^second_bucket\("(.+?)"\)/,`bucket("$1", 's')`]];for(let _ in r.expressions){let e=r.expressions[_];for(let[n,a]of o)e=yn(n,a,e,r,t);r.expressions[_]=e}}return r}function Tn(r,t){let o={datagrid:"Datagrid",Datagrid:"Datagrid",d3_y_area:"Y Area","Y Area":"Y Area",d3_y_line:"Y Line","Y Line":"Y Line",d3_xy_line:"X/Y Line","X/Y Line":"X/Y Line",d3_y_scatter:"Y Scatter","Y Scatter":"Y Scatter",d3_xy_scatter:"X/Y Scatter","X/Y Scatter":"X/Y Scatter",d3_x_bar:"X Bar","X Bar":"X Bar",d3_y_bar:"Y Bar","Y Bar":"Y Bar",d3_heatmap:"Heatmap",Heatmap:"Heatmap",d3_treemap:"Treemap",Treemap:"Treemap",d3_sunburst:"Sunburst",Sunburst:"Sunburst"};return"plugin"in r&&r.plugin!==o[r.plugin]&&(r.plugin=o[r.plugin],t.warn&&console.warn(`Deprecated perspective "plugin" attribute value "${r.plugin}" updated to "${o[r.plugin]}"`)),r}function Dn(r,t){if(r.plugin==="Datagrid"&&!!r.plugin_config){if(!r.plugin_config.columns){t.warn&&console.warn('Deprecated perspective attribute "plugin_config" moved to "plugin_config.columns"');let o={};for(let _ of Object.keys(r.plugin_config)){let e=r.plugin_config[_];delete r.plugin_config[_],typeof e.color_mode=="string"&&(e.color_mode==="foreground"?e.number_fg_mode="color":e.color_mode==="bar"?e.number_fg_mode="bar":e.color_mode==="background"?e.number_bg_mode="color":e.color_mode==="gradient"?e.number_bg_mode="gradient":console.warn(`Unknown color_mode ${e.color_mode}`),delete e.color_mode,t.warn&&console.warn('Deprecated perspective attribute "color_mode" renamed "number_bg_mode"')),o[_]=e}r.plugin_config.columns=o,t.replace_defaults&&(r.plugin_config.editable=!1,r.plugin_config.scroll_lock=!0)}for(let o of Object.keys(r.plugin_config.columns)){let _=r.plugin_config.columns[o];typeof _.number_color_mode=="string"&&(_.number_color_mode==="foreground"?_.number_fg_mode="color":_.number_color_mode==="bar"?_.number_fg_mode="bar":_.number_color_mode==="background"?_.number_bg_mode="color":_.number_color_mode==="gradient"&&(_.number_bg_mode="gradient"),delete _.number_color_mode,t.warn&&console.warn('Deprecated perspective attribute "number_color_mode" renamed "number_bg_mode"')),_.gradient!==void 0&&(_.number_bg_mode==="gradient"?_.bg_gradient=_.gradient:_.number_fg_mode==="bar"&&(_.fg_gradient=_.gradient),delete _.gradient,t.warn&&console.warn('Deprecated perspective attribute "gradient" renamed "bg_gradient"')),_.pos_color!==void 0&&(_.number_bg_mode!==void 0?_.pos_bg_color=_.pos_color:_.number_fg_mode!==void 0&&(_.pos_fg_color=_.pos_color),delete _.pos_color,t.warn&&console.warn('Deprecated perspective attribute "pos_color" renamed "pos_bg_color"')),_.neg_color!==void 0&&(_.number_bg_mode!==void 0?_.neg_bg_color=_.neg_color:_.number_fg_mode!==void 0&&(_.neg_fg_color=_.neg_color),delete _.neg_color,t.warn&&console.warn('Deprecated perspective attribute "neg_color" renamed "neg_bg_color"'))}}return r}function En(r,t){let o=["editable","selectable","name","table","master","linked"];for(let _ of o)_ in r&&(delete r[_],t.warn&&console.warn(`Deprecated perspective attribute "${_}" removed`));return r}function On(r,t){let o=["editable","selectable","name","table","master","linked"];for(let _ of o)_ in r&&r[_]===null&&(delete r[_],t.warn&&console.warn(`Deprecated perspective attribute "${_}" removed`));return r}var Sn=class extends HTMLElement{constructor(){super()}async open(r,t,o){this.instance?this.instance.reset(t,o):this.instance=new ve(this,t,o),this.instance.open(r)}destroy(){this.instance.destroy()}};document.createElement("perspective-number-column-style").constructor===HTMLElement&&window.customElements.define("perspective-number-column-style",Sn);var kn=class extends HTMLElement{constructor(){super()}async open(r,t,o){this.instance?this.instance.reset(t):this.instance=new ye(this,t,o),this.instance.open(r)}destroy(){this.instance.destroy()}};document.createElement("perspective-string-column-style").constructor===HTMLElement&&window.customElements.define("perspective-string-column-style",kn);var jn=class extends HTMLElement{constructor(){super();this.instance=new me(this)}open(r){this.instance.open(r)}unsafe_set_model(r){this.instance.unsafe_set_model(r)}};document.createElement("perspective-export-menu").constructor===HTMLElement&&window.customElements.define("perspective-export-menu",jn);var In=class extends HTMLElement{constructor(){super();this.instance=new he(this)}open(r){this.instance.open(r)}unsafe_set_model(r){this.instance.unsafe_set_model(r)}};document.createElement("perspective-copy-menu").constructor===HTMLElement&&window.customElements.define("perspective-copy-menu",In);var Cn=`
.dnd-poly-drag-image {
    opacity: .5 !important;
}
.dnd-poly-drag-image.dnd-poly-snapback {
    transition-property: transform, -webkit-transform !important;
    transition-duration: 250ms !important;
    transition-timing-function: ease-out !important;
}
`,it=document.createElement("style");it.textContent=Cn;document.head.appendChild(it);var q="dnd-poly-",Ln=q+"drag-image",An=q+"snapback",Pn=q+"icon",_t="dnd-poly-",Hn=_t+"dragstart-pending",Nn=_t+"dragstart-cancel",P=["none","copy","copyLink","copyMove","link","linkMove","move","all"],m=["none","copy","move","link"];function Mn(){let r={dragEvents:"ondragstart"in document.documentElement,draggable:"draggable"in document.documentElement,userAgentSupportingNativeDnD:void 0},t=!!window.chrome||/chrome/i.test(navigator.userAgent);return r.userAgentSupportingNativeDnD=!(/iPad|iPhone|iPod|Android/.test(navigator.userAgent)||t&&"ontouchstart"in document.documentElement),r}function Rn(){let r=!1;try{let t=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("test",null,t)}catch{}return r}var st=Rn();function ie(r){return r&&r.tagName}function J(r,t,o){o===void 0&&(o=!0),document.addEventListener(r,t,st?{passive:o}:!1)}function Ie(r,t){document.removeEventListener(r,t)}function _e(r,t,o,_){_===void 0&&(_=!1);let e=st?{passive:!0,capture:_}:_;return r.addEventListener(t,o,e),{off:function(){r.removeEventListener(t,o,e)}}}function ct(r,t){if(r.nodeType===1){let o=getComputedStyle(r);for(let _=0;_<o.length;_++){let e=o[_];t.style.setProperty(e,o.getPropertyValue(e),o.getPropertyPriority(e))}if(t.style.pointerEvents="none",t.removeAttribute("id"),t.removeAttribute("class"),t.removeAttribute("draggable"),t.nodeName==="CANVAS"){let _=r,e=t,n=_.getContext("2d").getImageData(0,0,_.width,_.height);e.getContext("2d").putImageData(n,0,0)}}if(r.hasChildNodes())for(let o=0;o<r.childNodes.length;o++)ct(r.childNodes[o],t.childNodes[o])}function Un(r){let t=r.cloneNode(!0);return ct(r,t),t}function ut(r){return r.length===0?0:r.reduce(function(t,o){return o+t},0)/r.length}function dt(r,t){for(let o=0;o<r.changedTouches.length;o++)if(r.changedTouches[o].identifier===t)return!0;return!1}function Ce(r,t,o){let _=[],e=[];for(let n=0;n<t.touches.length;n++){let a=t.touches[n];_.push(a[r+"X"]),e.push(a[r+"Y"])}o.x=ut(_),o.y=ut(e)}var Le=["","-webkit-"];function Yn(r){return Le.map(function(t){let o=r.style[t+"transform"];return!o||o==="none"?"":o.replace(/translate\(\D*\d+[^,]*,\D*\d+[^,]*\)\s*/g,"")})}function se(r,t,o,_,e){e===void 0&&(e=!0);let n=t.x,a=t.y;_&&(n+=_.x,a+=_.y),e&&(n-=parseInt(r.offsetWidth,10)/2,a-=parseInt(r.offsetHeight,10)/2);let s="translate3d("+n+"px,"+a+"px, 0)";for(let u=0;u<Le.length;u++){let l=Le[u]+"transform";r.style[l]=s+" "+o[u]}}function $n(r,t,o,_){let e=getComputedStyle(r);if(e.visibility==="hidden"||e.display==="none"){console.log("dnd-poly: source node is not visible. skipping snapback transition."),_();return}t.classList.add(An);let n=getComputedStyle(t),a=parseFloat(n.transitionDuration);if(isNaN(a)||a===0){console.log("dnd-poly: no transition used - skipping snapback"),_();return}console.log("dnd-poly: starting dragimage snap back");let s=r.getBoundingClientRect(),u={x:s.left,y:s.top};u.x+=document.body.scrollLeft||document.documentElement.scrollLeft,u.y+=document.body.scrollTop||document.documentElement.scrollTop,u.x-=parseInt(e.marginLeft,10),u.y-=parseInt(e.marginTop,10);let l=parseFloat(n.transitionDelay),v=Math.round((a+l)*1e3);se(t,u,o,void 0,!1),setTimeout(_,v)}var Fn=function(){function r(t,o){this._dataStore=t,this._setDragImageHandler=o,this._dropEffect=m[0]}return Object.defineProperty(r.prototype,"dropEffect",{get:function(){return this._dropEffect},set:function(t){this._dataStore.mode!==0&&P.indexOf(t)>-1&&(this._dropEffect=t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"types",{get:function(){if(this._dataStore.mode!==0)return Object.freeze(this._dataStore.types)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"effectAllowed",{get:function(){return this._dataStore.effectAllowed},set:function(t){this._dataStore.mode===2&&P.indexOf(t)>-1&&(this._dataStore.effectAllowed=t)},enumerable:!0,configurable:!0}),r.prototype.setData=function(t,o){if(this._dataStore.mode===2){if(t.indexOf(" ")>-1)throw new Error("illegal arg: type contains space");this._dataStore.data[t]=o,this._dataStore.types.indexOf(t)===-1&&this._dataStore.types.push(t)}},r.prototype.getData=function(t){if(this._dataStore.mode===1||this._dataStore.mode===2)return this._dataStore.data[t]||""},r.prototype.clearData=function(t){if(this._dataStore.mode===2){if(t&&this._dataStore.data[t]){delete this._dataStore.data[t];let o=this._dataStore.types.indexOf(t);o>-1&&this._dataStore.types.splice(o,1);return}this._dataStore.data={},this._dataStore.types=[]}},r.prototype.setDragImage=function(t,o,_){this._dataStore.mode===2&&this._setDragImageHandler(t,o,_)},r}();function zn(r){let t=r.target;do if(t.draggable!==!1&&(t.draggable===!0||t.getAttribute&&t.getAttribute("draggable")==="true"))return t;while((t=t.parentNode)&&t!==document.body)}function gt(r,t){return r?r===P[0]?m[0]:r.indexOf(P[1])===0||r===P[7]?m[1]:r.indexOf(P[4])===0?m[3]:r===P[6]?m[2]:m[1]:t.nodeType===3&&t.tagName==="A"?m[3]:m[1]}function Bn(r,t,o,_,e,n,a){a===void 0&&(a=null);let s=t.changedTouches[0],u=new Event(o,{bubbles:!0,cancelable:_});u.dataTransfer=n,u.relatedTarget=a,u.screenX=s.screenX,u.screenY=s.screenY,u.clientX=s.clientX,u.clientY=s.clientY,u.pageX=s.pageX,u.pageY=s.pageY;let l=r.getBoundingClientRect();return u.offsetX=u.clientX-l.left,u.offsetY=u.clientY-l.top,u}function C(r,t,o,_,e,n,a){n===void 0&&(n=!0),a===void 0&&(a=null),console.log("dnd-poly: dispatching "+r);let s=Bn(t,o,r,n,document.defaultView,e,a),u=!t.dispatchEvent(s);return _.mode=0,u}function lt(r,t){if(!r||r===P[7])return t;if(t===m[1]){if(r.indexOf(m[1])===0)return m[1]}else if(t===m[3]){if(r.indexOf(m[3])===0||r.indexOf("Link")>-1)return m[3]}else if(t===m[2]&&(r.indexOf(m[2])===0||r.indexOf("Move")>-1))return m[2];return m[0]}var Wn=function(){function r(t,o,_,e){this._initialEvent=t,this._config=o,this._sourceNode=_,this._dragOperationEndedCb=e,this._dragOperationState=0,this._immediateUserSelection=null,this._currentDropTarget=null,console.log("dnd-poly: setting up potential drag operation.."),this._lastTouchEvent=t,this._initialTouch=t.changedTouches[0],this._touchMoveHandler=this._onTouchMove.bind(this),this._touchEndOrCancelHandler=this._onTouchEndOrCancel.bind(this),J("touchmove",this._touchMoveHandler,!1),J("touchend",this._touchEndOrCancelHandler,!1),J("touchcancel",this._touchEndOrCancelHandler,!1)}return r.prototype._setup=function(){let t=this;console.log("dnd-poly: starting drag and drop operation"),this._dragOperationState=1,this._currentDragOperation=m[0],this._dragDataStore={data:{},effectAllowed:void 0,mode:3,types:[]},this._currentHotspotCoordinates={x:null,y:null},this._dragImagePageCoordinates={x:null,y:null};let o=this._sourceNode;if(this._dataTransfer=new Fn(this._dragDataStore,function(e,n,a){o=e,(typeof n=="number"||typeof a=="number")&&(t._dragImageOffset={x:n||0,y:a||0})}),this._dragDataStore.mode=2,this._dataTransfer.dropEffect=m[0],C("dragstart",this._sourceNode,this._lastTouchEvent,this._dragDataStore,this._dataTransfer))return console.log("dnd-poly: dragstart cancelled"),this._dragOperationState=3,this._cleanup(),!1;Ce("page",this._lastTouchEvent,this._dragImagePageCoordinates);let _=this._config.dragImageSetup(o);if(this._dragImageTransforms=Yn(_),_.style.position="absolute",_.style.left="0px",_.style.top="0px",_.style.zIndex="999999",_.classList.add(Ln),_.classList.add(Pn),this._dragImage=_,!this._dragImageOffset)if(this._config.dragImageOffset)this._dragImageOffset={x:this._config.dragImageOffset.x,y:this._config.dragImageOffset.y};else if(this._config.dragImageCenterOnTouch){let e=getComputedStyle(o);this._dragImageOffset={x:0-parseInt(e.marginLeft,10),y:0-parseInt(e.marginTop,10)}}else{let e=o.getBoundingClientRect(),n=getComputedStyle(o);this._dragImageOffset={x:e.left-this._initialTouch.clientX-parseInt(n.marginLeft,10)+e.width/2,y:e.top-this._initialTouch.clientY-parseInt(n.marginTop,10)+e.height/2}}return se(this._dragImage,this._dragImagePageCoordinates,this._dragImageTransforms,this._dragImageOffset,this._config.dragImageCenterOnTouch),document.body.appendChild(this._dragImage),this._iterationIntervalId=window.setInterval(function(){if(t._iterationLock){console.log("dnd-poly: iteration skipped because previous iteration hast not yet finished.");return}t._iterationLock=!0,t._dragAndDropProcessModelIteration(),t._iterationLock=!1},this._config.iterationInterval),!0},r.prototype._cleanup=function(){console.log("dnd-poly: cleanup"),this._iterationIntervalId&&(clearInterval(this._iterationIntervalId),this._iterationIntervalId=null),Ie("touchmove",this._touchMoveHandler),Ie("touchend",this._touchEndOrCancelHandler),Ie("touchcancel",this._touchEndOrCancelHandler),this._dragImage&&(this._dragImage.parentNode.removeChild(this._dragImage),this._dragImage=null),this._dragOperationEndedCb(this._config,this._lastTouchEvent,this._dragOperationState)},r.prototype._onTouchMove=function(t){let o=this;if(dt(t,this._initialTouch.identifier)!==!1){if(this._lastTouchEvent=t,this._dragOperationState===0){let _;if(this._config.dragStartConditionOverride)try{_=this._config.dragStartConditionOverride(t)}catch(e){console.error("dnd-poly: error in dragStartConditionOverride hook: "+e),_=!1}else _=t.touches.length===1;if(!_){this._cleanup();return}this._setup()===!0&&(this._initialEvent.preventDefault(),t.preventDefault());return}if(console.log("dnd-poly: moving draggable.."),t.preventDefault(),Ce("client",t,this._currentHotspotCoordinates),Ce("page",t,this._dragImagePageCoordinates),this._config.dragImageTranslateOverride)try{let _=!1;if(this._config.dragImageTranslateOverride(t,{x:this._currentHotspotCoordinates.x,y:this._currentHotspotCoordinates.y},this._immediateUserSelection,function(e,n){!o._dragImage||(_=!0,o._currentHotspotCoordinates.x+=e,o._currentHotspotCoordinates.y+=n,o._dragImagePageCoordinates.x+=e,o._dragImagePageCoordinates.y+=n,se(o._dragImage,o._dragImagePageCoordinates,o._dragImageTransforms,o._dragImageOffset,o._config.dragImageCenterOnTouch))}),_)return}catch(_){console.log("dnd-poly: error in dragImageTranslateOverride hook: "+_)}se(this._dragImage,this._dragImagePageCoordinates,this._dragImageTransforms,this._dragImageOffset,this._config.dragImageCenterOnTouch)}},r.prototype._onTouchEndOrCancel=function(t){if(dt(t,this._initialTouch.identifier)!==!1){if(this._config.dragImageTranslateOverride)try{this._config.dragImageTranslateOverride(void 0,void 0,void 0,function(){})}catch(o){console.log("dnd-poly: error in dragImageTranslateOverride hook: "+o)}if(this._dragOperationState===0){this._cleanup();return}t.preventDefault(),this._dragOperationState=t.type==="touchcancel"?3:2}},r.prototype._dragAndDropProcessModelIteration=function(){let t=this,o=this._currentDragOperation;this._dragDataStore.mode=3,this._dataTransfer.dropEffect=m[0];let _=C("drag",this._sourceNode,this._lastTouchEvent,this._dragDataStore,this._dataTransfer);if(_&&(console.log("dnd-poly: drag event cancelled."),this._currentDragOperation=m[0]),_||this._dragOperationState===2||this._dragOperationState===3){if(this._dragOperationEnded(this._dragOperationState)){$n(this._sourceNode,this._dragImage,this._dragImageTransforms,function(){t._finishDragOperation()});return}this._finishDragOperation();return}let e=this._config.elementFromPoint(this._currentHotspotCoordinates.x,this._currentHotspotCoordinates.y);console.log("dnd-poly: new immediate user selection is: "+e);let n=this._currentDropTarget;e!==this._immediateUserSelection&&e!==this._currentDropTarget&&(this._immediateUserSelection=e,this._currentDropTarget!==null&&(this._dragDataStore.mode=3,this._dataTransfer.dropEffect=m[0],C("dragexit",this._currentDropTarget,this._lastTouchEvent,this._dragDataStore,this._dataTransfer,!1)),this._immediateUserSelection===null?(this._currentDropTarget=this._immediateUserSelection,console.log("dnd-poly: current drop target changed to null")):(this._dragDataStore.mode=3,this._dataTransfer.dropEffect=gt(this._dragDataStore.effectAllowed,this._sourceNode),C("dragenter",this._immediateUserSelection,this._lastTouchEvent,this._dragDataStore,this._dataTransfer)?(console.log("dnd-poly: dragenter default prevented"),this._currentDropTarget=this._immediateUserSelection,this._currentDragOperation=lt(this._dataTransfer.effectAllowed,this._dataTransfer.dropEffect)):this._immediateUserSelection!==document.body&&(this._currentDropTarget=document.body))),n!==this._currentDropTarget&&ie(n)&&(console.log("dnd-poly: current drop target changed."),this._dragDataStore.mode=3,this._dataTransfer.dropEffect=m[0],C("dragleave",n,this._lastTouchEvent,this._dragDataStore,this._dataTransfer,!1,this._currentDropTarget)),ie(this._currentDropTarget)&&(this._dragDataStore.mode=3,this._dataTransfer.dropEffect=gt(this._dragDataStore.effectAllowed,this._sourceNode),C("dragover",this._currentDropTarget,this._lastTouchEvent,this._dragDataStore,this._dataTransfer)===!1?(console.log("dnd-poly: dragover not prevented on possible drop-target."),this._currentDragOperation=m[0]):(console.log("dnd-poly: dragover prevented."),this._currentDragOperation=lt(this._dataTransfer.effectAllowed,this._dataTransfer.dropEffect))),console.log("dnd-poly: d'n'd iteration ended. current drag operation: "+this._currentDragOperation),o!==this._currentDragOperation&&this._dragImage.classList.remove(q+o);let a=q+this._currentDragOperation;this._dragImage.classList.add(a)},r.prototype._dragOperationEnded=function(t){console.log("dnd-poly: drag operation end detected with "+this._currentDragOperation);let o=this._currentDragOperation===m[0]||this._currentDropTarget===null||t===3;return o?ie(this._currentDropTarget)&&(this._dragDataStore.mode=3,this._dataTransfer.dropEffect=m[0],C("dragleave",this._currentDropTarget,this._lastTouchEvent,this._dragDataStore,this._dataTransfer,!1)):ie(this._currentDropTarget)&&(this._dragDataStore.mode=1,this._dataTransfer.dropEffect=this._currentDragOperation,C("drop",this._currentDropTarget,this._lastTouchEvent,this._dragDataStore,this._dataTransfer)===!0?this._currentDragOperation=this._dataTransfer.dropEffect:this._currentDragOperation=m[0]),o},r.prototype._finishDragOperation=function(){console.log("dnd-poly: dragimage snap back transition ended"),this._dragDataStore.mode=3,this._dataTransfer.dropEffect=this._currentDragOperation,C("dragend",this._sourceNode,this._lastTouchEvent,this._dragDataStore,this._dataTransfer,!1),this._dragOperationState=2,this._cleanup()},r}(),H={iterationInterval:150,tryFindDraggableTarget:zn,dragImageSetup:Un,elementFromPoint:function(r,t){return document.elementFromPoint(r,t)}},Ae;function ft(r,t){if(console.log("dnd-poly: global touchstart"),Ae){console.log("dnd-poly: drag operation already active");return}let o=H.tryFindDraggableTarget(r,t);if(!o){console.log("dnd-poly: no draggable at touchstart coordinates");return}try{Ae=new Wn(r,H,o,bt)}catch(_){throw bt(H,r,3),_}}function Xn(r){console.log("dnd-poly: setup delayed dragstart..");let t=r.target,o=r.composedPath(),_=function(){console.log("dnd-poly: starting delayed drag.."),a.off(),s.off(),u.off(),l.off(),ft(r,o)},e=function(v){console.log("dnd-poly: aborting delayed drag because of "+v.type),a.off(),s.off(),u.off(),l.off(),t&&t.dispatchEvent(new CustomEvent(Nn,{bubbles:!0,cancelable:!0})),clearTimeout(n)};t&&t.dispatchEvent(new CustomEvent(Hn,{bubbles:!0,cancelable:!0}));let n=window.setTimeout(_,H.holdToDrag),a=_e(t,"touchend",e),s=_e(t,"touchcancel",e),u=_e(t,"touchmove",e),l=_e(window,"scroll",e,!0)}function bt(r,t,o){if(o===0&&(console.log("dnd-poly: Drag never started. Last event was "+t.type),r.defaultActionOverride))try{r.defaultActionOverride(t),t.defaultPrevented&&console.log("dnd-poly: defaultActionOverride has taken care of triggering the default action. preventing default on original event")}catch(_){console.log("dnd-poly: error in defaultActionOverride: "+_)}Ae=null}function Vn(r){if(r&&Object.keys(r).forEach(function(t){H[t]=r[t]}),!H.forceApply){let t=Mn();if(t.userAgentSupportingNativeDnD&&t.draggable&&t.dragEvents)return!1}return console.log("dnd-poly: Applying mobile drag and drop polyfill."),H.holdToDrag?(console.log("dnd-poly: holdToDrag set to "+H.holdToDrag),J("touchstart",Xn,!1)):J("touchstart",ft,!1),!0}function qn(r,t){let o=t||r.composedPath();for(let _ of o){let e=_;do if(e.draggable!==!1&&e.getAttribute&&e.getAttribute("draggable")==="true")return e;while((e=e.parentNode)&&e!==document.body)}}function Jn(r,t){for(let o of this._path)if(o.elementFromPoint){let _=o.elementFromPoint(r,t);if(_){for(;_.shadowRoot;)_=_.shadowRoot.elementFromPoint(r,t);return _}}}function Gn(r){return this._path=r.composedPath(),!0}window.addEventListener("touchmove",function(){});Vn({tryFindDraggableTarget:qn,elementFromPoint:Jn,dragStartConditionOverride:Gn,holdToDrag:500});var rr={HTMLPerspectiveViewerElement:at,HTMLPerspectiveViewerPluginElement:Be};export{at as HTMLPerspectiveViewerElement,Be as HTMLPerspectiveViewerPluginElement,nr as convert,rr as default};
//# sourceMappingURL=perspective-viewer.js.map
